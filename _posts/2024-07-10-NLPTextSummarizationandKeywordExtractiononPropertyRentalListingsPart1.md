---
title: "부동산 임대 목록에서 NLP를 활용한 텍스트 요약 및 키워드 추출 - Part 1"
description: ""
coverImage: "/assets/img/2024-07-10-NLPTextSummarizationandKeywordExtractiononPropertyRentalListingsPart1_0.png"
date: 2024-07-10 04:25
ogImage:
  url: /assets/img/2024-07-10-NLPTextSummarizationandKeywordExtractiononPropertyRentalListingsPart1_0.png
tag: Tech
originalTitle: "NLP: Text Summarization and Keyword Extraction on Property Rental Listings — Part 1"
link: "https://medium.com/towards-data-science/nlp-text-summarization-and-keyword-extraction-on-property-rental-listings-part-1-f1b760cc7bbb"
isUpdated: true
---

## NLP 기술의 실용적 적용: 텍스트 요약, NER, 주제 모델링 및 텍스트 분류

## 소개

자연어 처리 (NLP)는 임대 목록 설명의 분석과 사용성을 크게 향상시킬 수 있습니다. 이 연구에서는 텍스트 요약, Named Entity Recognition (NER), 주제 모델링과 같은 NLP 기술의 실용적인 응용에 대해 탐구해보겠습니다. 도쿄의 Airbnb 목록 데이터에서 정보를 추출하고 목록 설명을 보강하는 방법을 살펴봅니다. spaCy 및 SciKit-Learn과 같은 공개 데이터 및 도구를 사용하여 결과를 재현하거나 이러한 기술을 손쉽게 적용할 수 있습니다. 코드는 GitHub에서 이용 가능하며 포크하여 실험할 수 있습니다.

부분 1(이 기사)은 기본 사항을 다룹니다: 목표, 데이터 및 준비 절차, 그리고 명명된 엔티티 인식 (NER), TF-IDF/문장 점수화, Google의 T5 (텍스트 대 텍스트 변환기)와 같은 다양한 기술을 사용하여 키워드와 텍스트 개요를 추출하는 방법을 다룹니다. 사용자 경험을 향상시키기 위해 이러한 통찰력을 활용하는 방법도 살펴봅니다 — 제안 사항이 포함되어 있습니다.

<div class="content-ad"></div>

파트 2 (곧 공개 예정)는 토픽 모델링과 텍스트 예측을 다룹니다: 파트 2에서는 레이블이 없는 데이터에 대해 토픽 모델링을 수행하는 방법을 보여줍니다. 이 다가오는 글에서는 클러스터링과 같은 기술을 사용하여 숨겨진 주제를 발견하고, 카테고리와 주제에 따라 부동산 임대물을 분류하는 예측 모델을 구축하는 방법에 대해 논의할 것입니다.

## 목표

이 과제는 명확합니다:

주어진 예시 입력: 임대 설명

<div class="content-ad"></div>

- 키워드: “상업 거리”, “가게”, 또는 “역 근처”
  키워드는 데이터 시각화를 도와주며 테마를 발견하고 유사성을 식별하며 프론트엔드의 검색 기능을 개선하는 데 도움이 됩니다. 이 기사의 아래에는 이러한 키워드를 제공하고 있습니다.
- 요약: 1~2 문장 정도, 대략 80자 안팎
  요약은 요약된 정보를 제공하여 사용자 경험을 향상시키며 리스트의 가장 중요한 측면을 빠르게 전달합니다.
- 주제/토픽: “훌륭한 접근성”, “가족 친화적”
  같은 주제를 가진 목록을 분류하는 것은 사용자가 선호하는 속성과 일치하는 속성을 찾는 데 도움이 되는 추천 시스템으로 작용할 수 있습니다. 개별 키워드와 달리 이러한 주제는 여러 키워드 그룹(kitchen, desk, queen bed, long-term = “디지털 노매드 친화적”)을 다룰 수 있습니다. 이에 대해 더 자세히 살펴보겠습니다. (오는 글에서)

챕터:

- 데이터 및 준비
  데이터 수집, 정제, 사용자 지정 레마
- 텍스트 요약
  TFIDF/문장 점수매기기, 딥 러닝, LLM (T5), 평가
- NER을 사용한 키워드 추출
  정규식, Matcher, 딥 러닝
- 제안 서비스 방법

<div class="content-ad"></div>

# 1. 데이터 및 준비

우리의 데이터셋은 insideairbnb.com에서 수집된 임대 매물 설명으로, 크리에이티브 커먼즈 저작자표시 4.0 국제 라이센스하에 사용됩니다. 우리는 주로 재산 소유주가 작성한 텍스트에 집중합니다. 이 데이터는 주로 영어로 작성된 약 15,000개의 임대 설명을 포함하고 있습니다. 일본어로 작성된 레코드(놀랍게도 소수!)는 데이터 정제 작업의 일부로 제거되었으며，중복된 항목 및 스크레이퍼에 의해 남겨진 HTML 작은 티끌 또한 제거되었습니다. 웹 스크레이퍼의 부산물일 수도 있는 많은 데이터 중복으로 인해 원래 크기의 약 절반으로 데이터 정제가 진행되었습니다.

## 1a. spaCy 파이프라인

데이터가 정리되면 spaCy 파이프라인을 구축할 수 있습니다. 우리는 새로운 출발점에서 시작하거나 en_core_web_sm과 같은 미리 훈련된 모델을 사용하여 영어 문서를 처리할 수 있습니다. 이 모델에는 견고한 파이프라인이 포함돼 있습니다:

<div class="content-ad"></div>

- 토큰화(Tokenization): 텍스트를 단어, 구두점 등으로 나누는 것.
- 품사 태깅(Part-of-Speech Tagging): 명사, 동사 등으로 단어를 태깅하는 것.
- 의존성 구문 분석(Dependency Parsing): 단어간의 관계를 식별하는 것.
- 문장 분리기(Sentencizer): 문서를 문장으로 분해하는 것.
- 귀결화(Lemmatization): 단어를 기본 형태로 축소하는 것 (예: seeing, see, saw, seen).
- 속성 규칙(Attribute Ruler): 토큰 속성을 추가, 제거 또는 변경하는 것.
- 명명된 엔티티 인식(Named Entity Recognition): 명명된 엔티티의 범주(사람, 장소 등)를 식별하는 것.

## 1b. 사용자 지정 귀결화

en*core_web_sm과 같은 검증된 파이프라인을 사용하더라도, 특정 사용 사례를 다루기 위해 종종 조정이 필요합니다. 예를 들어, 임대업계에서 일반적으로 사용되는 약어(br은 침실, apt은 아파트, st는 거리 등)는 사용자 정의 귀결화를 통해 파이프라인에 도입될 수 있습니다. 이를 평가하기 위해 사용자 정의 귀결화를 적용한 파이프라인과 그렇지 않은 파이프라인 간의 토큰.lemma* 수를 세어볼 수 있습니다. 필요시, en_core_web_md(중간) 또는 en_core_web_lg(대규모)와 같은 더 견고한 미리 제작된 파이프라인도 사용할 수 있습니다.

생산 수준의 프로젝트에서는 더 철저한 목록이 필요하며, 더 엄격한 데이터 정리가 필요할 수 있습니다. 예를 들어, 이모티콘과 이모티콘과 비슷한 기호가 일본 사용자들에 의해 쓰이는 문화적으로 영향을 받은 글에 자주 포함됩니다. 이러한 기호들은 노이즈를 도입하며 제거 또는 변환과 같은 특정 처리가 필요할 수 있습니다. 문장 구분이 누락된 문장을 처리하기 위해 더 견고한 적절한 문장 경계 탐지기를 사용하는 등 다른 데이터 전처리가 필요할 수도 있습니다.

<div class="content-ad"></div>

# 2. 텍스트 요약

도쿄의 임대 옵션을 탐색하는 것은 압도적일 수 있습니다. 각 리스트는 이상적인 주택이 될 것을 약속합니다. 그런데 데이터에 따르면, 재산 설명은 종종 부족할 수 있습니다 — 지나치게 길거나 짧거나, 관련 없는 세부사항이 혼합될 수도 있습니다; 이것이 텍스트 요약이 유용한 이유입니다.

## 2a. 난이도: 쉬움 — TF-IDF

텍스트 요약에 대한 한 가지 전형적인 방법은 TF-IDF (단어 빈도-역문서 빈도)라는 기술을 활용하는 것입니다. TF-IDF는 단어가 특정 문서(임대 리스트)에서 얼마나 자주 나타나는지와 전체 데이터 집합 또는 코퍼스 전체에서 얼마나 드물게 나타나는지를 모두 고려합니다. 이 기술은 또한 인덱싱, 유사성 감지 및 클러스터링과 같은 다양한 텍스트 분석 작업에도 도움이 됩니다 (Part 2에서 탐구할 것입니다).

<div class="content-ad"></div>

다른 기법의 한 변형은 단어 공기로 점수 매기기입니다. TF-IDF와 같이, 이 방법은 문서 내에서 단어 발생을 비교하여 점수를 계산합니다. 이 방법은 빠르고 쉽고 추가적인 도구나 다른 문서의 인식이 필요하지 않습니다. 심지어 typescript를 사용하여 프론트 엔드에서 즉석에서도 할 수 있지만 권장되지는 않습니다.

그러나 이와 같은 추출 요약 기법에는 함정이 있습니다: 문서에서 최상의 문장만을 찾기 때문에 선택된 문장에 오타나 기타 문제가 있으면 요약에도 나타납니다. 이러한 오타는 점수에 영향을 미치며, 이 모델은 실수에 덜 관대하며 선택된 문장(또는 문장들)에 포함되지 않은 중요 정보가 누락될 수도 있습니다.

## 2b. 수준: 중급 — 딥 러닝

빈도 기반 방법 이상으로, 우리는 텍스트 요약을 위해 딥 러닝의 힘을 활용할 수 있습니다. Sequence-to-sequence (Seq2Seq) 모델은 한 형태에서 다른 형태로의 시퀀스 번역을 위해 설계된 신경망 구조입니다. 텍스트 요약 작업에서, 이러한 모델은 복잡한 번역기처럼 작용합니다.

<div class="content-ad"></div>

Seq2Seq 모델은 일반적으로 두 부분으로 구성되어 있어요: 인코더와 디코더랍니다. 인코더는 전체 입력 텍스트를 처리하며, 그 의미와 구조를 파악해요. 이 정보는 숨겨진 표현으로 압축돼요. 그런 다음, 디코더는 인코더에서 받은 이 숨겨진 표현을 활용해 새로운 시퀀스, 즉 텍스트 요약을 생성하죠. 훈련 중에 디코더는 원본 텍스트의 주요 포인트를 잡아내는 인코딩된 표현을 번역하는 법을 배워요. 추출적 방법과는 달리 이러한 모델은 추상적 요약을 수행해요: 텍스트에서 직접 문장을 추출하는 대신, 자신의 말로 요약을 생성해요.

### 2c. 수준: 고급 — 사전 훈련된 언어 모델

T5(TexT-To-Text Transfer Transformer)나 BERT(Bidirectional Encoder Representations from Transformers)와 같은 사전 훈련된 언어 모델은 자원과 설정 기능을 갖춘 사람들에게 요약 작업을 현저히 향상시킬 수 있어요. 그러나 이러한 모델은 대규모 텍스트에 대해 효과적일 수 있지만, 이 특정 사용 사례에는 지나치게 강력할 수 있어요. 최적으로 작동하려면 더 많은 설정이 필요할 뿐만 아니라, 문제 공학(전처리), 재훈련 또는 세세한 조정, 그리고 모델이 원하는 출력을 향해 이끌기 위한 포스트 프로세싱(문법, 텍스트 대문자화 또는 심지어 사실 확인 및 상식적 검토)이 필요하기도 해요.

### 2.d 텍스트 요약 평가

<div class="content-ad"></div>

위의 그림에서 볼 수 있듯이, TFIDF를 사용한 "단순" 모델과 LLM을 사용한 복잡한 모델을 비교할 때 승자가 항상 명확하지는 않습니다. 텍스트 요약 시스템의 품질을 평가하는 것은 복잡한 도전 과제입니다. 단일하고 명확한 답변이 있는 작업과 달리 주어진 텍스트에 대한 단일 완벽한 요약이 없기 때문입니다. 사람들은 원본 콘텐츠의 다양한 측면에 우선순위를 두기 때문에 자동 측정 항목을 완벽하게 인간 판단과 일치시키기가 어려워집니다.

ROUGE (Recall-Oriented Understudy for Gisting Evaluation)와 같은 평가 지표는 이를 시도합니다. 생성된 요약과 인간이 작성한 요약 간 n-그램(단어의 연속) 간의 중첩을 비교함으로써, ROUGE는 요약의 품질을 체계적으로 평가합니다. 이 방법은 종종 이용 가능하지 않은 인간이 작성한 요약 집합을 기준으로하여 평가됩니다.

# 3. Named Entity Recognition (NER)을 사용한 키워드 추출

요약은 유용하지만, 키워드에는 다른 목적이 있습니다. 키워드는 잠재적 임차인이 찾을 수 있는 가장 중요한 측면을 포착합니다. 키워드를 추출하기 위해 NER과 같은 NLP 기술을 사용할 수 있습니다. 이 프로세스는 빈도가 높은 단어를 식별하는 것을 넘어서 요소들인 단어 공존 및 임대 목록 도메인과의 관련성을 고려함으로써 중요한 정보를 추출할 수 있습니다. 이 정보는 '고급한'(형용사), '긴자'(위치)와 같은 단어, 또는 '조용한 환경'(명사구) 또는 '신주쿠 인근'(근접성)과 같은 구문이 될 수 있습니다.

<div class="content-ad"></div>

![NLP Text Summarization and Keyword Extraction on Property Rental Listings Part 1](/assets/img/2024-07-10-NLPTextSummarizationandKeywordExtractiononPropertyRentalListingsPart1_0.png)

### 3a. Level: Easy — Regex

When it comes to finding keywords, the 'find' function in string operations combined with regular expressions can be quite helpful. Yet, using this method usually involves having an extensive list of words and patterns, which might not always be the most efficient approach. In cases where there is a comprehensive list of keywords to search for (such as stock exchange abbreviations for finance-related tasks), using regex could be the easiest way to tackle the task.

### 3b. Level: Intermediate — The Matcher

<div class="content-ad"></div>

정규 표현식은 간단한 키워드 추출에 사용될 수 있지만, 광범위한 규칙 목록이 필요하다보니 모든 경우를 다루기 어렵습니다. 다행히 대부분의 자연어 처리 도구는 이 명명된 개체 인식(NER) 기능을 기본으로 제공하고 있습니다. 예를 들어, Natural Language Toolkit(NLTK)에는 Named Entity Chunkers가 있고, spaCy에는 Matcher가 있습니다.

Matcher를 사용하면 품사 태그나 특정 키워드와 같은 언어적 특성을 기반으로 패턴을 정의할 수 있습니다. 이러한 패턴은 전세 설명과 일치하여 관련 키워드와 구를 식별할 수 있습니다. 이 접근 방식은 부동산의 장점을 더 잘 대표하는 단어(예: Tokyo)와 의미 있는 구(예: 아름다운 집)를 포함합니다.

noun_phrases_patterns = [
[{'POS': 'NUM'}, {'POS': 'NOUN'}], #예: 2 bedrooms
[{'POS': 'ADJ', 'OP': '*'}, {'POS': 'NOUN'}], #예: 아름다운 집
[{'POS': 'NOUN', 'OP': '+'}], #예: 집
]

# 지리정치적 엔티티

gpe_patterns = [
[{'ENT_TYPE': 'GPE'}], #예: Tokyo
]

# 근접성

proximity_patterns = [

# 예: 공항 근처

[{'POS': 'ADJ'}, {'POS': 'ADP'}, {'POS': 'NOUN', 'ENT_TYPE': 'FAC', 'OP': '?'}],

# 예: 나리타 근처

[{'POS': 'ADJ'}, {'POS': 'ADP'}, {'POS': 'PROPN', 'ENT_TYPE': 'FAC', 'OP': '?'}]
]

## 3c. 레벨: 고급 — 딥러닝 기반 Matcher

<div class="content-ad"></div>

Matcher를 사용해도 문장 속 단어의 맥락 때문에 일부 용어가 규칙 기반 매칭에 포착되지 않을 수 있습니다. 예를 들어 "우에노 공원에서 돌아서 바로"와 같은 용어는 미리 정의된 패턴을 통과하지 못할 수 있고, "신주쿠 가부키초"가 사람으로 오인될 수 있습니다(이는 지역 또는 LOC입니다).

이러한 경우 딥러닝 기반 접근 방식이 더 효과적일 수 있습니다. 대량의 렌탈 목록 데이터로 학습한 이 모델은 단어 간의 의미적 관계를 이해합니다. 이 방법은 언어 사용의 변화에 더 적응 가능하며 숨겨진 통찰력을 발견할 수 있습니다.

spaCy를 사용하면 딥러닝 기반 개체명 인식(NER)을 간편하게 수행할 수 있습니다. 그러나 이 방법의 주요 구성 요소는 일반적으로 레이블이 지정된 훈련 데이터의 가용성입니다. 이 연습의 경우도 마찬가지입니다. 레이블은 대상 용어와 개체 이름의 쌍(예: "도보로 가까운 곳"은 명사구임 — 또는 그림에 나와 있는 것처럼 신주쿠 가부키초는 사람이 아니라 LOC임)으로 특정 방식으로 포맷되어 있습니다. 우리는 규칙 기반에서는 내장 기능을 통해 명사, 위치 및 기타 항목으로 용어를 설명하는 것과 달리, 식별하고자 하는 대상 용어를 발견하기 위해 데이터 탐색이나 도메인 전문가가 필요합니다.

이 기사의 두 번째 부분에서는 군집화, 부트스트래핑 및 기타 방법을 사용하여 토픽 모델링을 위해 데이터로부터 주제 또는 레이블을 발견하는 이 기술에 대해 논의할 것입니다.

<div class="content-ad"></div>

# 4. 제공 제안

키워드 추출은 백엔드와 프론트엔드 애플리케이션 모두에 귀중합니다. 이를 테마와 주제 탐구 등 다양한 다운스트림 분석에 활용할 수 있습니다. 프론트 엔드에서는 이러한 키워드를 사용하여 사용자가 비슷한 특성을 가진 목록을 찾도록 돕을 수 있습니다. 이를 인스타그램이나 트위터의 해시태그처럼 생각해보세요 (하지만 자동적으로!). 또한 이 키워드를 강조하거나 클릭 가능하도록 만들 수도 있습니다. 예를 들어 명명된 개체 인식 (NER)를 사용하여 "이이다바시"나 "아사쿠사"와 같은 위치를 식별할 수 있습니다. 사용자가 이러한 키워드 위로 마우스를 가져가면 팝업 창에서 해당 장소에 대한 관련 정보를 표시할 수 있습니다.

요약은 목록의 간결한 개요를 제공하여 주요 세부 내용을 빠르게 파악하는 데 이상적이며, 모바일 디스플레이에도 좋습니다.

![이미지](https://miro.medium.com/v2/resize:fit:1400/1*CyhKFXuJ-sEp2RK2q7Lwqg.gif)

<div class="content-ad"></div>

# 앞으로 나아가기

이 글에서는 텍스트 요약 및 named entity recognition (NER)과 같은 여러 NLP 기술들을 어떻게 실제로 활용하는지에 대해 보여드렸습니다. 이러한 기술들은 간결하고 정보를 잘 담고 검색하기 쉬운 임대 매물 목록을 제공함으로써 사용자 경험을 크게 향상시킬 수 있습니다.

차기 글(제2부)에서는 클러스터링과 같은 방법을 사용하여 숨겨진 주제와 레이블을 발견할 것입니다. 이를 통해 추천 엔진 역할을 할 수 있는 견고한 모델을 구축할 것입니다. 또한 임대 매물 설명의 분석과 사용성을 향상시키기 위해 토픽 모델링 및 텍스트 분류와 같은 고급 NLP 기술들을 더욱 탐구할 것입니다.

以上です ★ これからもうよろしくおねがいします ☆ また今度｡

<div class="content-ad"></div>

노트:

1. Github 저장소: [여기](https://github.com/kristiyanto/nlp_on_airbnb_dataset)
2. 데이터 (크리에이티브 커먼즈 저작자표시 4.0 국제 라이센스): [여기](https://insideairbnb.com/get-the-data/)
3. 본 글의 모든 이미지는 저자가 제작했습니다.
